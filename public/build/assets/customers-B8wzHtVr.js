import{r,j as e,L as M,a as i}from"./app-BxvgWP6W.js";import{O as E,V as x}from"./index-QYw-FRGm.js";import{A,X as D}from"./app-layout-Dyy_2evI.js";import{c as h}from"./button-BKmSOcu5.js";/* empty css            */import"./index-DM1TXiYZ.js";import"./index-BdHeIxiQ.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],V=h("Eye",S);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],I=h("Pencil",z);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],O=h("Trash2",L),P=[{title:"Customers",href:"/customers"}];function X(){const[p,f]=r.useState([]),[N,l]=r.useState(!1),[a,c]=r.useState(!1),[n,o]=r.useState(null),[s,d]=r.useState({name:"",phone:"",id_number:""}),u=()=>{i.get("/api/customers").then(t=>f(t.data))};r.useEffect(()=>{u()},[]);const k=()=>{d({name:"",phone:"",id_number:""}),o(null),c(!1),l(!0)},w=t=>{d({name:t.name,phone:t.phone,id_number:t.id_number}),o(t),c(!1),l(!0)},v=t=>{d({name:t.name,phone:t.phone,id_number:t.id_number}),o(t),c(!0),l(!0)},b=()=>{l(!1),o(null),d({name:"",phone:"",id_number:""})},m=t=>{d({...s,[t.target.name]:t.target.value})},C=async t=>{var y,g;t.preventDefault();try{if(n)await i.put(`/api/customers/${n.id}`,s),x.success("Customer updated successfully!");else try{await i.post("/api/customers",s),x.success("Customer added successfully!")}catch(j){x.error(((g=(y=j.response)==null?void 0:y.data)==null?void 0:g.message)||"Failed to add customer.")}b(),u()}catch{alert("Error saving customer")}},_=async t=>{confirm("Are you sure you want to delete this customer?")&&(await i.delete(`/api/customers/${t}`),u())};return e.jsxs(A,{breadcrumbs:P,children:[e.jsx(M,{title:"Customers"}),e.jsxs("div",{className:"flex flex-col gap-6 p-4 overflow-x-auto",children:[e.jsx(E,{position:"top-right",reverseOrder:!1}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-2xl font-semibold text-gray-800 dark:text-white",children:"Customers"}),e.jsx("button",{onClick:k,className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-md",children:"+ Add Customer"})]}),e.jsx("div",{className:"rounded-xl border border-gray-200 bg-white p-6 shadow-md dark:border-gray-700 dark:bg-gray-900",children:e.jsx("div",{className:"overflow-auto",children:e.jsxs("table",{className:"min-w-full table-auto text-sm border border-gray-300 dark:border-gray-600",children:[e.jsx("thead",{className:"bg-gray-100 dark:bg-gray-800",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2 border",children:"Name"}),e.jsx("th",{className:"px-4 py-2 border",children:"Phone"}),e.jsx("th",{className:"px-4 py-2 border",children:"ID Number"}),e.jsx("th",{className:"px-4 py-2 border",children:"Actions"})]})}),e.jsxs("tbody",{children:[p.map(t=>e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-800",children:[e.jsx("td",{className:"px-4 py-2 border",children:t.name}),e.jsx("td",{className:"px-4 py-2 border",children:t.phone}),e.jsx("td",{className:"px-4 py-2 border",children:t.id_number}),e.jsxs("td",{className:"px-4 py-2 border flex gap-2 justify-center",children:[e.jsx("button",{onClick:()=>v(t),className:"text-blue-500 hover:text-blue-700",title:"View",children:e.jsx(V,{size:18})}),e.jsx("button",{onClick:()=>w(t),className:"text-green-500 hover:text-green-700",title:"Edit",children:e.jsx(I,{size:18})}),e.jsx("button",{onClick:()=>_(t.id),className:"text-red-500 hover:text-red-700",title:"Delete",children:e.jsx(O,{size:18})})]})]},t.id)),p.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:4,className:"text-center p-4 text-gray-500",children:"No customers found."})})]})]})})})]}),N&&e.jsx("div",{className:"fixed inset-0 bg-black/30 z-50 flex items-center justify-center",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 w-full max-w-md relative shadow-xl",children:[e.jsx("button",{onClick:b,className:"absolute top-2 right-2 text-gray-600 hover:text-red-500",children:e.jsx(D,{})}),e.jsx("h2",{className:"text-xl font-semibold mb-4 text-gray-800 dark:text-white",children:a?"Customer Details":n?"Edit Customer":"Add Customer"}),e.jsxs("form",{onSubmit:C,className:"space-y-4",children:[e.jsx("input",{name:"name",placeholder:"Full Name",value:s.name,onChange:m,disabled:a,className:"w-full px-4 py-2 border rounded dark:bg-gray-700 dark:text-white",required:!0}),e.jsx("input",{name:"phone",placeholder:"Phone Number",value:s.phone,onChange:m,disabled:a,className:"w-full px-4 py-2 border rounded dark:bg-gray-700 dark:text-white",required:!0}),e.jsx("input",{name:"id_number",placeholder:"ID Number",value:s.id_number,onChange:m,disabled:a,className:"w-full px-4 py-2 border rounded dark:bg-gray-700 dark:text-white",required:!0}),!a&&e.jsx("button",{type:"submit",className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded w-full",children:n?"Update":"Add"})]})]})})]})}export{X as default};
